# External Secrets Operator Helm Values
# Chart: external-secrets/external-secrets
# https://external-secrets.io/latest/introduction/getting-started/

# Install CRDs
installCRDs: true

# Replica count
replicaCount: 1

# Leader election
leaderElect: true

# Resource limits
resources:
  requests:
    cpu: 50m
    memory: 64Mi
  limits:
    cpu: 100m
    memory: 128Mi

# Service account configuration
serviceAccount:
  create: true
  name: external-secrets
  annotations:
    # IRSA annotation - update with your AWS account and OIDC provider
    # eks.amazonaws.com/role-arn: arn:aws:iam::ACCOUNT_ID:role/external-secrets-role

# Webhook configuration
webhook:
  replicaCount: 1
  
  resources:
    requests:
      cpu: 25m
      memory: 32Mi
    limits:
      cpu: 100m
      memory: 128Mi

# Cert controller for webhook certificates
certController:
  replicaCount: 1
  
  resources:
    requests:
      cpu: 25m
      memory: 32Mi
    limits:
      cpu: 100m
      memory: 128Mi

# Metrics configuration
metrics:
  service:
    enabled: true
    port: 8080

# Pod security context
podSecurityContext:
  runAsNonRoot: true
  fsGroup: 65534

# Container security context
securityContext:
  allowPrivilegeEscalation: false
  capabilities:
    drop:
      - ALL
  readOnlyRootFilesystem: true
  runAsNonRoot: true
  runAsUser: 65534

# Service monitor for Prometheus
serviceMonitor:
  enabled: true
  namespace: monitoring
  labels:
    release: monitoring
  interval: 30s
